!function(e,r){"use strict";var t=function(e,r){var t=e.find(".bdt-crypto-currency-table"),n=t.data("settings"),a=Boolean(elementorFrontend.isEditMode());if(!t.length)return;var i={currency:n.currency,limit:100,order:"market_cap_desc"};n.currency&&(i.currency=n.currency),n.limit&&(i.limit=n.limit),n.order&&(i.order=n.order);let d,o,c=i;function l(e){return e>999&&e<1e6?(e/1e3).toFixed(2)+"K":e>1e9?(e/1e9).toFixed(2)+"B":e>1e6?(e/1e6).toFixed(2)+"M":e<900?e:void 0}o=void 0!==c&&void 0!==c.currency?c.currency:"usd",d=r(n.tableId).DataTable({language:window.ElementPackConfig.data_table.language,destroy:!0,processing:!0,serverSide:!1,searching:n.searching,ordering:n.ordering,paging:n.paging,info:n.info,pageLength:n.pageLength,ajax:{type:"GET",dataType:"json",url:ElementPackConfig.ajaxurl+"?action=ep_crypto",data:{currency:o,per_page:c.limit,order:c.order,ids:n.ids}},columns:[{data:"market_cap_rank"},{data:"id",render:function(e,r,t,n){return'<div class="bdt-coin"><div class="bdt-coin-image"><img src="'+t.image+'" alt="'+t.id+'"></div><div class="bdt-coin-title"><div class="bdt-coin-name">'+t.id+'</div><div class="bdt-coin-symbol">'+t.symbol+"</div></div></div>"}},{data:"current_price",render:function(e,r,t,n){let a=o.toString().toUpperCase(),i=Number(e)===e&&e%1!=0?e.toFixed(2):e;return returnCurrencySymbol(a)+i}},{data:"price_change_percentage_24h",render:function(e,r,t,n){return Number(e)===e&&e%1!=0?e.toFixed(2)+"%":e+"%"}},{data:"market_cap",render:function(e,r,t,n){let a=o.toString().toUpperCase(),i=l(e);return returnCurrencySymbol(a)+i}},{data:"total_volume",render:function(e,r,t,n){let a=o.toString().toUpperCase(),i=l(e);return returnCurrencySymbol(a)+i}},{data:"circulating_supply",render:function(e,r,t,n){return l(e)}},{data:"last_seven_days_changes",render:function(e,r,t,n){return'<input type="hidden" class="hdnInputCanvas-'+t.id+'"  value="'+e+'"/><div class="chart-container" style="position: relative; height: 100%; width: 250px"><canvas id="canvas-'+t.id+'"></canvas></div>'}}],columnDefs:[{searchable:!1,orderable:!1,targets:[7]}],order:[[0,"asc"]],createdRow:function(e,t,n){let a=r("td",e).eq(7),i=r(a).find("input").val().split(",");i&&i.length>15&&(i=i.slice(0,14));const d=r(a).find("canvas"),o=[],c=[];i.forEach((e,r)=>{o.push(r),c.push(Number(e))});const l=new Chart(d,{type:"line",data:{labels:o,datasets:[{label:"",backgroundColor:"rgba(30,135,240,0.2)",borderColor:"#1e87f0",fill:!0,lineTension:.4,pointStyle:"circle",pointBackgroundColor:"transparent",pointBorderWidth:0,borderWidth:2,data:c}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{title:()=>""}}},scales:{x:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}},y:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}}}}});l.canvas.parentNode.style.width="100%",l.canvas.parentNode.style.height="60px",l.canvas.style.width="100%",l.canvas.style.height="60px"}}),!0!==a&&setTimeout((function(){!function e(){r.ajax({type:"GET",url:ElementPackConfig.ajaxurl+"?action=ep_crypto_data",data:{currency:o,per_page:c.limit,order:c.order,ids:n.ids}}).done((function(t){var n=d.rows().data();let a=[];for(let e=0;e<n.length;e++)a.push({id:n[e].id,current_price:n[e].current_price});let i=JSON.parse(t),o=[];for(let e=0;e<a.length;e++)r.map(i,(function(r,t){r.id===a[e].id&&r.current_price!==a[e].current_price&&o.push({id:a[e].id,current_price:r.current_price,old_price:a[e].current_price})}));o.filter((function(e,t){let n=0;d.column(1).data().filter((function(t,a){return t===e.id&&(n=a,d.column(2).nodes().each((function(t,n,i){if(n===a){d.cell(t).data(e.current_price);let n=d.column(2).nodes();r(n[a]).addClass("focus-item")}}))),t===e.id}))})),setTimeout((function(){return d.column(2).nodes().each((function(){r(this).removeClass("focus-item")})),e()}),1e4)}))}()}),5e3)};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-crypto-currency-table.default",t)}))}(jQuery,window.elementorFrontend);