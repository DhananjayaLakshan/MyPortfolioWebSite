!function(e,n){"use strict";window.is_fb_loggedin=!1,window.is_google_loggedin=!1;var t=function(n){var t=n.find(".redirect_after_login").val();e.ajax({type:"POST",dataType:"json",url:element_pack_ajax_login_config.ajaxurl,data:n.serialize(),beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){var i=n.find(".element-pack-google-recaptcha");if(i.length>0){var o=i.attr("data-widgetid");grecaptcha.reset(o),grecaptcha.execute(o)}1==e.loggedin?(bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<span bdt-icon='icon: check'></span> "+e.message,status:"primary"}),document.location.href=t):(bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<div class=\"bdt-flex\"><span bdt-icon='icon: warning'></span><span>"+e.message+"</span></div>",status:"warning"}))},error:function(e){bdtUIkit.notification.closeAll(),bdtUIkit.notification({message:"<span bdt-icon='icon: warning'></span>"+element_pack_ajax_login_config.unknownerror,status:"warning"})}})},i=function(n){var t=n.find(".redirect_after_login").val();FB.api("/me",{fields:"id, name, first_name, last_name, email, link, gender, locale, picture"},(function(n){var i=FB.getAuthResponse().userID,o=FB.getAuthResponse().accessToken;window.is_fb_loggedin=!0;var a={id:n.id,name:n.name,first_name:n.first_name,last_name:n.last_name,email:n.email,link:n.link};e.ajax({url:window.ElementPackConfig.ajaxurl,method:"post",data:{action:"element_pack_social_facebook_login",data:a,method:"post",dataType:"json",userID:i,security_string:o,lang:element_pack_ajax_login_config.language},dataType:"json",beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){!0===e.success?void 0===t?location.reload():window.location=t:location.reload()},complete:function(e,n){bdtUIkit.notification.closeAll()}})}))},o=function(){var n,t=e(".element-pack-google-recaptcha");t.length>0&&t.each((function(){var t=e(this),i=t.attr("data-widgetid");void 0!==i&&!1!==i||(n=grecaptcha.render(e(this).attr("id"),{sitekey:t.data("sitekey"),callback:function(e){""!==e&&t.append(jQuery("<input>",{type:"hidden",value:e,class:"g-recaptcha-response"}))}}),t.attr("data-widgetid",n))}))};window.onLoadElementPackLoginCaptcha=o;var a=function(e,n){var o=e.find(".bdt-user-login"),a=e.find("form.bdt-user-login-form"),d=e.find(".element-pack-google-recaptcha"),c=o.find(".fb_btn_link"),l=o.find("#google_btn_link"),s=o.find(".redirect_after_login").val();if(a.length>0&&a.on("submit",(function(e){e.preventDefault(),t(a)})),elementorFrontend.isEditMode()&&void 0===d.attr("data-widgetid")&&onLoadElementPackLoginCaptcha(),d.length>0&&grecaptcha.ready((function(){var e=d.attr("data-widgetid");grecaptcha.execute(e)})),c.length>0&&c.on("click",(function(){is_fb_loggedin||FB.login((function(e){e.authResponse&&i(o)}),{scope:"email"})})),l.length>0){var r=l.data("clientid");gapi.load("auth2",(function(){gapi.auth2.init({client_id:r,cookiepolicy:"single_host_origin"}).attachClickHandler("google_btn_link",{},(function(e){var t=e.getBasicProfile();t.getName(),t.getEmail();if(window.is_google_loggedin){var i=e.getAuthResponse().id_token;n.ajax({url:window.ElementPackConfig.ajaxurl,method:"post",data:{action:"element_pack_social_google_login",id_token:i},dataType:"json",beforeSend:function(e){bdtUIkit.notification({message:"<div bdt-spinner></div> "+element_pack_ajax_login_config.loadingmessage,timeout:!1})},success:function(e){!0===e.success&&(void 0===s?location.reload():window.location=s)},complete:function(e,n){bdtUIkit.notification.closeAll()}})}}),(function(e){}))})),l.on("click",(function(){window.is_google_loggedin=!0}))}};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.default",a),elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.bdt-dropdown",a),elementorFrontend.hooks.addAction("frontend/element_ready/bdt-user-login.bdt-modal",a)}))}(jQuery,window.elementorFrontend);