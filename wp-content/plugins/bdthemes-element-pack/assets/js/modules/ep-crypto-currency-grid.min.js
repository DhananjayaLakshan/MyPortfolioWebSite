!function(r,e){"use strict";var t=function(r,e){var t=r.find(".bdt-crypto-currency-grid"),n=t.data("settings"),i=Boolean(elementorFrontend.isEditMode());if(!t.length)return;var c={currency:n.currency,limit:100,order:"market_cap_desc"};n.currency&&(c.currency=n.currency),n.limit&&(c.limit=n.limit),n.order&&(c.order=n.order);let d,a=c;d=void 0!==a&&void 0!==a.currency?a.currency:"usd",e.ajax({type:"GET",dataType:"json",url:ElementPackConfig.ajaxurl+"?action=ep_crypto",data:{currency:d,per_page:a.limit,order:a.order,ids:n.ids},success:function(r){if(e(t).empty(),void 0!==r.data&&r.data.length>0&&!0===r.apiErrors){let n=`<div class="bdt-alert-danger" bdt-alert>\n                                    <a class="bdt-alert-close" bdt-close></a>\n                                    <p>${r.data}</p>\n                                </div>`;e(t).append(n)}else{var i=0;r.data.forEach(r=>{if(++i>a.limit)return;let c=d.toString().toUpperCase(),o=returnCurrencySymbol(c)+r.current_price;var s="",p="",u="",l="",y="";1==n.showCurrencyImage&&(s=`<div class="bdt-crypto-currency-grid-img">\n                                        <img src="${r.image}" alt="${r.id}">\n                                    </div>`),1==n.showCurrencyShortName&&(u=`<span>(${r.symbol})</span>`),1==n.showCurrencyName&&(p=`<div class="bdt-crypto-currency-grid-title">\n                        <h4>${r.id} ${u}</h4>\n                    </div>`),1==n.showCurrencyPriceLabel&&(y='<div class="bdt-crypto-currency-grid-price-text">\n                        <span>price</span>\n                    </div>'),1==n.showCurrencyCurrentPrice&&(l=`${y}\n                    <div class="bdt-crypto-currency-grid-price-nu">\n                        <span class="price-int">${o}</span>\n                    </div>`);var g=`<div class="bdt-crypto-currency-grid-item" data-id="${r.id}">\n                                <div class="bdt-crypto-currency-grid-content">\n                                    <div class="bdt-crypto-currency-grid-bg">\n                                        <img src="${r.image}" alt="${r.id}">\n                                    </div>\n\n                                    <div class="bdt-crypto-currency-grid-head-content">\n                                        ${s}\n                                        ${p}\n                                    </div>\n                                    <div class="bdt-crypto-currency-grid-bottom-content">\n                                        ${l}\n                                    </div>\n                                </div>\n                                <span class="bdt-price-text bdt-hidden">${r.current_price}</span>\n                            </div>`;e(t).append(g)})}}}),!0!==i&&setTimeout((function(){!function r(){e.ajax({type:"GET",url:ElementPackConfig.ajaxurl+"?action=ep_crypto_data",data:{currency:d,per_page:a.limit,order:a.order,ids:n.ids}}).done((function(n){let i=e(t).find(".bdt-crypto-currency-grid-item"),c=[];for(let r=0;r<i.length;r++)c.push({id:e(i[r]).data("id"),current_price:parseFloat(e(i[r]).find(".bdt-price-text").text())});let a=JSON.parse(n),o=[];for(let r=0;r<c.length;r++)e.map(a,(function(e,t){e.id===c[r].id&&e.current_price!==c[r].current_price&&o.push({id:c[r].id,current_price:e.current_price,old_price:c[r].current_price})}));0!==o.length&&o.forEach(r=>{e(t).find('[data-id="'+r.id+'"]').addClass("data-changed"),e(t).find('[data-id="'+r.id+'"]').find(".bdt-price-text").text(r.current_price);let n=d.toString().toUpperCase(),i=returnCurrencySymbol(n)+r.current_price;e(t).find('[data-id="'+r.id+'"] .price-int').text(i)}),setTimeout((function(){return e(t).find(".bdt-crypto-currency-grid-item").removeClass("data-changed"),r()}),1e4)}))}()}),5e3)};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-crypto-currency-grid.default",t)}))}(jQuery,window.elementorFrontend);