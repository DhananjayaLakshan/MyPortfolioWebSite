!function(r,e){"use strict";var t=function(r,e){var t=r.find(".bdt-crypto-currency-chart"),n=t.data("settings"),c=Boolean(elementorFrontend.isEditMode());if(!t.length)return;var a={currency:n.currency,limit:100,order:"market_cap_desc"};n.currency&&(a.currency=n.currency),n.limit&&(a.limit=n.limit),n.order&&(a.order=n.order);let i,d=a;i=void 0!==d&&void 0!==d.currency?d.currency:"usd",e.ajax({type:"GET",dataType:"json",url:ElementPackConfig.ajaxurl+"?action=ep_crypto",data:{currency:i,per_page:d.limit,order:d.order,ids:n.ids},success:function(r){e(t).empty();var c=0;r.data.forEach(r=>{if(++c>d.limit)return;let a=i.toString().toUpperCase(),o=returnCurrencySymbol(a)+r.current_price,s=r.price_change_percentage_1h,l=Number(s)===s&&s%1!=0?s.toFixed(2)+"%":s+"%";var p="",u="",y="",h="";1==n.showCurrencyShortName&&(u=`<span>(${r.symbol})</span>`),1==n.showCurrencyName&&(p=`<div class="bdt-crypto-currency-chart-title"><h4>${r.id} ${u}</h4></div>`),1==n.showCurrencyCurrentPrice&&(y=`<div class="bdt-crypto-currency-chart-price-l">\n                        <span class="price-int">${o}</span>\n                    </div>`),1==n.showPriceChangePercentage&&(h=`<div class="bdt-crypto-currency-chart-change">\n                        <span class="bdt-crypto-currency-chart-list-change up" title="1 Hour Data Change">${l}</span>\n                    </div>`);var v=`<div class="bdt-crypto-currency-chart-item" data-id="${r.id}">\n                                    <div class="bdt-crypto-currency-chart-head-content">\n                                        <div class="bdt-crypto-currency-chart-head-inner-content">\n                                            ${p}\n                                            ${h}\n                                            \n                                        </div>\n                                        <div class="bdt-crypto-currency-chart-bottom-inner-content">\n                                            ${y}\n                                        </div>\n                                    </div>\n                                    <div class="bdt-crypto-currency-chart-chart">\n                                        <input type="hidden" class="hdnInputCanvas-${r.id}"  value="${r.last_seven_days_changes}"/><div class="chart-container" style="position: relative;"><canvas id="canvas-${r.id}"></canvas></div>\n                                    </div>\n                                    <span class="bdt-price-text bdt-hidden">${r.current_price}</span>\n                                </div>`;e(t).append(v);let f=e(t).find('[data-id="'+r.id+'"]'),m=e(f).find("input").val().split(",");m&&m.length>15&&(m=m.slice(0,14));const b=e(f).find("canvas"),g=[],_=[];m.forEach((r,e)=>{g.push(e),_.push(Number(r))});new Chart(b,{type:"line",data:{labels:g,datasets:[{label:"",backgroundColor:"rgba(30,135,240,0.2)",borderColor:"#1e87f0",fill:!0,lineTension:.4,pointStyle:"circle",pointBackgroundColor:"#1e87f0",pointBorderWidth:1,borderWidth:2,data:_}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}},y:{ticks:{display:!1},grid:{display:!1,drawBorder:!1,drawOnChartArea:!1,drawTicks:!1}}}}})})}}),!0!==c&&setTimeout((function(){!function r(){e.ajax({type:"GET",url:ElementPackConfig.ajaxurl+"?action=ep_crypto_data",data:{currency:i,per_page:d.limit,order:d.order,ids:n.ids}}).done((function(n){let c=e(t).find(".bdt-crypto-currency-chart-item"),a=[];for(let r=0;r<c.length;r++)a.push({id:e(c[r]).data("id"),current_price:parseFloat(e(c[r]).find(".bdt-price-text").text())});let d=JSON.parse(n),o=[];for(let r=0;r<a.length;r++)e.map(d,(function(e,t){e.id===a[r].id&&e.current_price!==a[r].current_price&&o.push({id:a[r].id,current_price:e.current_price,old_price:a[r].current_price})}));0!==o.length&&o.forEach(r=>{e(t).find('[data-id="'+r.id+'"]').addClass("data-changed"),e(t).find('[data-id="'+r.id+'"]').find(".bdt-price-text").text(r.current_price);let n=i.toString().toUpperCase(),c=returnCurrencySymbol(n)+r.current_price;e(t).find('[data-id="'+r.id+'"] .price-int').text(c)}),setTimeout((function(){return e(t).find(".bdt-crypto-currency-chart-item").removeClass("data-changed"),r()}),1e4)}))}()}),5e3)};jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/bdt-crypto-currency-chart.default",t)}))}(jQuery,window.elementorFrontend);